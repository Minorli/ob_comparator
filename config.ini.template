# 配置说明：源端用 oracledb，目标端通过 obclient；确保凭据勿入库/勿外泄。
[ORACLE_SOURCE]
# 源端 Oracle 数据库的连接信息
# DSN 格式: "hostname:port/service_name"
user     = your_username
password = your_password
dsn      = hostname:1521/service_name

[OCEANBASE_TARGET]
# 目标端 OceanBase (obclient) 的命令行参数，确保路径/权限正确
executable  = /usr/bin/obclient
host        = 127.0.0.1
port        = 2883
# 完整的 -u 参数，建议使用 SYS
user_string = root@sys#cluster_name
password    = your_password

[SETTINGS]
# 要扫描的所有源端 schema，用逗号分隔，可换行（大小写不敏感）
source_schemas          = ORA_APP,ORA_FIN,ORA_BI
# Remap 规则文件路径（迁移时需要改变 schema 的对象映射）
# 留空表示按 1:1 映射处理
remap_file              = remap_rules.txt

# dbcat 调用的 CLI 超时，单位秒；对象多时可调大
# 建议值：300~1800（视对象数量与网络情况而定）
cli_timeout             = 600
# obclient 调用超时，单位秒；控制元数据/执行脚本超时
# 建议值：60~600（视对象数量与网络情况而定）
obclient_timeout        = 120
# run_fixup 执行 SQL 的超时（秒）；0 表示不设超时
# 建议值：3600（视授权/视图规模调整）
fixup_cli_timeout       = 3600

# 报告与修复脚本输出目录（可为相对路径或绝对路径）
fixup_dir               = fixup_scripts
report_dir              = main_reports
# 日志目录与级别（日志文件与控制台输出）
# log_level 可选值：DEBUG/INFO/WARNING/ERROR/CRITICAL
log_dir                 = logs
log_level               = INFO
# report_width 为报告宽度（避免 nohup 等环境下自动截断）
report_width            = 160

# 修补脚本生成相关
# fixup_workers 控制并发生成脚本的线程数，建议 8 或 12；留空或 0 则自动取 min(12, CPU)
fixup_workers           = 8
# progress_log_interval 控制生成脚本时的进度日志间隔（秒，>=1）
progress_log_interval   = 10
# dbcat 每批对象数量（避免命令行过长，可按需调大）
# 建议值：100~300
dbcat_chunk_size        = 150

# 是否在对比后生成修复脚本（dbcat 抽取，VIEW 走 DBMS_METADATA）
# 可选值：true/false/1/0/yes/no（大小写不敏感）
generate_fixup          = true
# 是否生成授权脚本并附加到修补 DDL（依赖于源端权限/依赖推导）
# 可选值：true/false/1/0/yes/no（大小写不敏感）
generate_grants         = true
# 授权抽取范围（DBA_TAB_PRIVS）
# owner: 仅加载源 schema 拥有的对象权限（默认，性能更佳）
# owner_or_grantee: 兼容旧逻辑，额外加载 grantee 在源 schema 的对象授权
grant_tab_privs_scope   = owner
# 授权合并（减少 GRANT 语句数量）
# grant_merge_privileges: 合并同一对象的多权限
# grant_merge_grantees: 合并同一权限的多 grantee
grant_merge_privileges  = true
grant_merge_grantees    = true
# 授权兼容过滤（可选覆盖）
# grant_supported_sys_privs: 支持的系统权限清单（逗号分隔，留空自动探测）
# grant_supported_object_privs: 支持的对象权限清单（逗号分隔，留空使用默认）
# grant_include_oracle_maintained_roles: 是否生成 ORACLE_MAINTAINED 角色 (true/false)
grant_supported_sys_privs       = 
grant_supported_object_privs    = 
grant_include_oracle_maintained_roles = false
# 仅生成指定目标 schema/对象类型的修补脚本（留空为全量）
# fixup_schemas 示例：HERO_A,HERO_B
# fixup_types 可选值：
#   TABLE, VIEW, MATERIALIZED VIEW, PROCEDURE, FUNCTION, PACKAGE, PACKAGE BODY,
#   SYNONYM, JOB, SCHEDULE, TYPE, TYPE BODY, SEQUENCE, TRIGGER, INDEX, CONSTRAINT
# 示例：fixup_types=TABLE,TRIGGER
fixup_schemas           = 
fixup_types             = 
# 可选：触发器清单过滤（每行 SCHEMA.TRIGGER_NAME），配置后仅生成列表内触发器脚本
trigger_list            =

# 可选：限制本次只检查的对象类型/模块，留空表示全量（大小写不敏感，逗号分隔）
# check_primary_types 可选值：
#   TABLE, VIEW, MATERIALIZED VIEW, PROCEDURE, FUNCTION, PACKAGE, PACKAGE BODY,
#   SYNONYM, JOB, SCHEDULE, TYPE, TYPE BODY
#   注意：MATERIALIZED VIEW 默认仅打印不校验（仍会在报告中展示）
# check_extra_types 可选值：
#   INDEX, CONSTRAINT, SEQUENCE, TRIGGER
# 示例：
#   只检查表 -> check_primary_types=TABLE
#   检查表+视图 -> check_primary_types=TABLE,VIEW
#   只检查扩展序列 -> check_extra_types=SEQUENCE
check_primary_types     =
check_extra_types       = index,constraint,sequence,trigger
# 是否进行依赖关系校验
# 可选值：true/false/1/0/yes/no（大小写不敏感）
check_dependencies      = true
# 是否输出依赖链路拓扑（依赖在前的顺序），用于审计/排查
# 可选值：true/false/1/0/yes/no（大小写不敏感；仅在 check_dependencies=true 时生效）
print_dependency_chains = true
# 是否比对表/列注释 (DBA_TAB_COMMENTS / DBA_COL_COMMENTS)，若元数据权限不足可设为 false
# 可选值：true/false/1/0/yes/no（大小写不敏感）
check_comments          = true
# 是否启用 schema 推导（一对多场景下用于非表对象）
# 可选值：true/false/1/0/yes/no（大小写不敏感）
infer_schema_mapping    = true
# 是否清洗 PL/SQL DDL 中的全角标点（默认开启，避免目标端解析失败）
ddl_punct_sanitize      = true
# DDL hint 清洗策略:
#   drop_all       - 删除全部 hint 注释
#   keep_supported - 保留 OceanBase 支持的 hint (默认)
#   keep_all       - 保留全部 hint (但仍受 denylist 控制)
#   report_only    - 保留全部 hint，仅报告未知 hint
ddl_hint_policy         = keep_supported
# 额外允许的 hint（逗号分隔，大小写不敏感）
ddl_hint_allowlist      =
# 强制删除的 hint（逗号分隔，大小写不敏感）
ddl_hint_denylist       =
# 额外允许 hint 文件（每行一个，# 开头视为注释）
ddl_hint_allowlist_file =

# Oracle Instant Client 目录 (必须包含 libclntsh.so)
oracle_client_lib_dir   = /path/to/instantclient_19_29

# dbcat 配置：需预先设置好 JAVA_HOME；from/to 影响转换逻辑
# dbcat_parallel_workers 为并发线程数（>=1）
dbcat_parallel_workers = 4
# dbcat_bin 为 dbcat 安装目录或可执行文件路径
dbcat_bin               = /path/to/dbcat-2.5.0-SNAPSHOT
# dbcat_output_dir 为 dbcat 输出目录（可相对/绝对）
dbcat_output_dir        = dbcat_output
# dbcat_from/dbcat_to 为 dbcat profile（依 dbcat 版本可选）
dbcat_from              = oracle19c
dbcat_to                = oboracle422
# dbcat_no_cal_dep: 禁用依赖计算以加速抽取（true/false）
dbcat_no_cal_dep        = false
# dbcat_query_meta_thread: 元数据查询线程数（dbcat 参数 --query-meta-thread）
dbcat_query_meta_thread =
# dbcat_progress_interval: dbcat 长时间运行时的进度心跳间隔（秒，<=0 关闭）
dbcat_progress_interval = 15
